# ç©ºé—´æ„ŸçŸ¥å›¾åƒç”Ÿæˆå®éªŒæŒ‡å—

## ğŸ“‹ å®éªŒæ¦‚è¿°

æœ¬å®éªŒæ—¨åœ¨æ„å»ºä¸€ä¸ª**é«˜è´¨é‡çš„ç©ºé—´æ„ŸçŸ¥å›¾åƒç”Ÿæˆç³»ç»Ÿ**ï¼ŒåŸºäº **Kolors (SDXLæ¶æ„) + Adapter Tuning** æŠ€æœ¯è·¯çº¿ï¼Œè®­ç»ƒ **Spatial Adapter** å’Œ **Layout Planner** ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œå®ç°ç²¾ç¡®çš„ç©ºé—´å¸ƒå±€æ§åˆ¶å’Œå¯¹è±¡ä½ç½®ç”Ÿæˆã€‚

**ç›®æ ‡æ•°æ®é›†è§„æ¨¡**ï¼š200k - 500k é«˜è´¨é‡æ ·æœ¬ï¼ˆé€‚ç”¨äºé¡¶çº§ä¼šè®®è®ºæ–‡ï¼šCVPR/NeurIPSï¼‰

---

## ğŸ”¬ å®éªŒæµç¨‹

### é˜¶æ®µä¸€ï¼šæ•°æ®å‡†å¤‡ï¼ˆData Preparationï¼‰

#### 1.1 æ•°æ®ç­›é€‰ï¼ˆSpatial Filteringï¼‰

**è„šæœ¬**ï¼š`scripts/filter_wukong_hybrid.py`

**åŠŸèƒ½**ï¼šä» Wukong æ•°æ®é›†ä¸­ç­›é€‰å‡ºåŒ…å«ç©ºé—´ä½ç½®ä¿¡æ¯çš„å›¾åƒæè¿°

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- **æ··åˆç­›é€‰ç­–ç•¥**ï¼šå…³é”®è¯å¿«é€Ÿé¢„ç­›é€‰ + Qwen æ¨¡å‹ç²¾ç¡®åˆ†ç±»
- **å¤šGPUå¹¶è¡Œå¤„ç†**ï¼šæ”¯æŒå¤šå¡åŒæ—¶ç­›é€‰ï¼Œå……åˆ†åˆ©ç”¨GPUèµ„æº
- **æ–­ç‚¹ç»­ä¼ **ï¼šè‡ªåŠ¨è·³è¿‡å·²å¤„ç†æ•°æ®ï¼Œæ”¯æŒä¸­æ–­æ¢å¤
- **åˆ†ç±»ç»“æœ**ï¼š`strong`ï¼ˆå¼ºç©ºé—´å…³ç³»ï¼‰ã€`weak`ï¼ˆå¼±ç©ºé—´å…³ç³»ï¼‰ã€`none`ï¼ˆæ— ç©ºé—´å…³ç³»ï¼‰

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
# å•GPU
python scripts/filter_wukong_hybrid.py \
  --input_dir /mnt/disk/lxh/gill_data/wukong_release/wukong_release \
  --output_csv /mnt/disk/lxh/gill_data/wukong_filtered_spatial.csv \
  --model /home/lxh/Project/gill-main/model/Qwen2.5-7B-Instruct \
  --device cuda \
  --batch_size 32 \
  --target_samples 200000

# å¤šGPUï¼ˆ3å¼ 4090ï¼‰
CUDA_VISIBLE_DEVICES=0,1,2 python scripts/filter_wukong_hybrid.py \
  --input_dir /mnt/disk/lxh/gill_data/wukong_release/wukong_release \
  --output_csv /mnt/disk/lxh/gill_data/wukong_filtered_spatial.csv \
  --model /home/lxh/Project/gill-main/model/Qwen2.5-7B-Instruct \
  --device cuda \
  --batch_size 32 \
  --num-gpus 3 \
  --target_samples 200000
```

**è¾“å‡º**ï¼š`wukong_filtered_spatial.csv`ï¼ˆåŒ…å« `url`, `caption`, `spatial_type` å­—æ®µï¼‰

---

#### 1.2 å›¾åƒä¸‹è½½ï¼ˆImage Downloadï¼‰

**è„šæœ¬**ï¼š`scripts/download_wukong.py`

**åŠŸèƒ½**ï¼šæ ¹æ®ç­›é€‰åçš„ CSV æ–‡ä»¶ä¸‹è½½å›¾åƒå¹¶ç”Ÿæˆ JSONL ç´¢å¼•

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- **æµå¼å¤„ç†**ï¼šåˆ†å—è¯»å– CSVï¼Œç«‹å³å¼€å§‹ä¸‹è½½ï¼Œæ— éœ€ç­‰å¾…å¤§æ–‡ä»¶åŠ è½½
- **å¤šçº¿ç¨‹ä¸‹è½½**ï¼šå¹¶å‘ä¸‹è½½ï¼Œæé«˜ä¸‹è½½æ•ˆç‡
- **è‡ªåŠ¨é‡è¯•**ï¼šå¢å¼ºçš„è¶…æ—¶å¤„ç†å’Œé”™è¯¯æ¢å¤æœºåˆ¶
- **JSONLç´¢å¼•**ï¼šè‡ªåŠ¨ç”ŸæˆåŒ…å«å›¾åƒè·¯å¾„å’Œå…ƒæ•°æ®çš„ JSONL æ–‡ä»¶

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
python scripts/download_wukong.py \
  --input_csv /mnt/disk/lxh/gill_data/wukong_filtered_spatial.csv \
  --output_dir /mnt/disk/lxh/gill_data/images \
  --output_jsonl /mnt/disk/lxh/gill_data/wukong_raw.jsonl \
  --num-workers 16 \
  --timeout 3
```

**è¾“å‡º**ï¼š
- å›¾åƒæ–‡ä»¶ï¼š`/mnt/disk/lxh/gill_data/images/*.jpg`
- ç´¢å¼•æ–‡ä»¶ï¼š`wukong_raw.jsonl`ï¼ˆæ¯è¡ŒåŒ…å« `image_path`, `caption`, `spatial_type` ç­‰å­—æ®µï¼‰

---

#### 1.3 è¾¹ç•Œæ¡†æ ‡æ³¨ï¼ˆBounding Box Annotationï¼‰

**è„šæœ¬**ï¼š`scripts/annotate_wukong_qwen2vl.py`

**åŠŸèƒ½**ï¼šä½¿ç”¨ Qwen2-VL-7B-Instruct æ¨¡å‹ä¸ºå›¾åƒä¸­çš„å¯¹è±¡ç”Ÿæˆç²¾ç¡®çš„è¾¹ç•Œæ¡†æ ‡æ³¨

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- **å¤šGPUå¹¶è¡Œæ ‡æ³¨**ï¼šæ”¯æŒå¤šå¡åŒæ—¶å¤„ç†ï¼Œå¤§å¹…æå‡æ ‡æ³¨é€Ÿåº¦
- **å†…å­˜ä¼˜åŒ–**ï¼šæ™ºèƒ½æ˜¾å­˜ç®¡ç†ï¼Œæ”¯æŒå¤§å›¾åƒå¤„ç†ï¼ˆå¯é…ç½® `max_image_size`ï¼‰
- **è¯¦ç»†è¿›åº¦æ˜¾ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºå·²æ ‡æ³¨æ•°é‡ã€å‰©ä½™æ•°é‡ã€å¤„ç†é€Ÿåº¦ã€é¢„è®¡å®Œæˆæ—¶é—´
- **æ–­ç‚¹ç»­ä¼ **ï¼šè‡ªåŠ¨è·³è¿‡å·²æ ‡æ³¨å›¾åƒï¼Œæ”¯æŒä¸­æ–­æ¢å¤
- **SOTAçº§æ ‡æ³¨è´¨é‡**ï¼šä½¿ç”¨å½“å‰æœ€å…ˆè¿›çš„ä¸­æ–‡è§†è§‰è¯­è¨€æ¨¡å‹è¿›è¡Œæ ‡æ³¨

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
# å•GPU
python scripts/annotate_wukong_qwen2vl.py \
  --input /mnt/disk/lxh/gill_data/wukong_raw.jsonl \
  --image-root /mnt/disk/lxh/gill_data/images \
  --output /mnt/disk/lxh/gill_data/wukong_labeled.jsonl \
  --model /home/lxh/Project/gill-main/model/Qwen2-VL-7B-Instruct \
  --device cuda \
  --batch-size 2 \
  --max-image-size 1024

# å¤šGPUï¼ˆ3å¼ 4090ï¼‰
CUDA_VISIBLE_DEVICES=0,1,2 python scripts/annotate_wukong_qwen2vl.py \
  --input /mnt/disk/lxh/gill_data/wukong_raw.jsonl \
  --image-root /mnt/disk/lxh/gill_data/images \
  --output /mnt/disk/lxh/gill_data/wukong_labeled.jsonl \
  --model /home/lxh/Project/gill-main/model/Qwen2-VL-7B-Instruct \
  --device cuda \
  --batch-size 1 \
  --num-gpus 3 \
  --max-image-size 1024
```

**è¾“å‡º**ï¼š`wukong_labeled.jsonl`ï¼ˆæ¯è¡ŒåŒ…å« `image_path`, `caption`, `objects` å­—æ®µï¼Œå…¶ä¸­ `objects` ä¸ºè¾¹ç•Œæ¡†åˆ—è¡¨ï¼‰

**æ•°æ®æ ¼å¼ç¤ºä¾‹**ï¼š
```json
{
  "image_path": "/mnt/disk/lxh/gill_data/images/xxx.jpg",
  "caption": "ä¸Šæ–¹æ˜¯è“å¤©ï¼Œä¸‹æ–¹æ˜¯è‰åœ°",
  "objects": [
    {"name": "å¤©ç©º", "bbox": [0.0, 0.0, 1.0, 0.4]},
    {"name": "è‰åœ°", "bbox": [0.0, 0.6, 1.0, 1.0]}
  ]
}
```

---

### é˜¶æ®µäºŒï¼šæ¨¡å‹è®­ç»ƒï¼ˆModel Trainingï¼‰

#### 2.1 è®­ç»ƒ Layout Planner

**è„šæœ¬**ï¼š`scripts/train_layout_planner.py`

**åŠŸèƒ½**ï¼šè®­ç»ƒå¸ƒå±€è§„åˆ’å™¨ï¼Œå­¦ä¹ ä»æ–‡æœ¬æè¿°ç”Ÿæˆå¯¹è±¡è¾¹ç•Œæ¡†åºåˆ—

**è®­ç»ƒæ•°æ®æ ¼å¼**ï¼š
- **è¾“å…¥**ï¼šå›¾åƒæè¿°ï¼ˆcaptionï¼‰
- **è¾“å‡º**ï¼šå¯¹è±¡è¾¹ç•Œæ¡†åºåˆ—ï¼ˆ`<obj>å¯¹è±¡å</obj><box>[x1,y1,x2,y2]</box>`ï¼‰

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
python scripts/train_layout_planner.py \
  --data /mnt/disk/lxh/gill_data/wukong_labeled.jsonl \
  --output-dir ./checkpoints/layout_planner \
  --batch-size 8 \
  --epochs 5 \
  --learning-rate 1e-4
```

**è¾“å‡º**ï¼šLayout Planner æ¨¡å‹æ£€æŸ¥ç‚¹

---

#### 2.2 è®­ç»ƒ Spatial Adapter

**è„šæœ¬**ï¼š`scripts/train_spatial_adapter.py`

**åŠŸèƒ½**ï¼šè®­ç»ƒç©ºé—´é€‚é…å™¨ï¼Œå°†å¸ƒå±€ä¿¡æ¯æ³¨å…¥åˆ° Kolors/SDXL çš„ UNet ä¸­

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- **æ··åˆç²¾åº¦è®­ç»ƒ**ï¼šFP32 æƒé‡ + FP16 è®¡ç®— + GradScalerï¼Œæå‡è®­ç»ƒæ•ˆç‡
- **åŠ¨æ€æ³¨å…¥**ï¼šå°† Spatial Adapter æ³¨å…¥åˆ° UNet çš„æ‰€æœ‰ Attention å±‚
- **å†»ç»“ä¸»æ¨¡å‹**ï¼šå†»ç»“ UNet/VAE/TextEncoderï¼Œåªè®­ç»ƒ Adapter å‚æ•°

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
python scripts/train_spatial_adapter.py \
  --mixed-data /mnt/disk/lxh/gill_data/wukong_labeled.jsonl \
  --kolors-model ./model/Kolors \
  --output-dir ./checkpoints/spatial_adapter \
  --batch-size 4 \
  --epochs 5 \
  --learning-rate 1e-4 \
  --mixed-precision
```

**è¾“å‡º**ï¼šSpatial Adapter æ¨¡å‹æ£€æŸ¥ç‚¹

---

#### 2.3 ç«¯åˆ°ç«¯è®­ç»ƒï¼ˆå¯é€‰ï¼‰

**è„šæœ¬**ï¼š`scripts/train_gill.py`

**åŠŸèƒ½**ï¼šç«¯åˆ°ç«¯å¾®è°ƒæ•´ä¸ª GILL ç³»ç»Ÿ

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
python scripts/train_gill.py \
  --data /mnt/disk/lxh/gill_data/wukong_labeled.jsonl \
  --output-dir ./checkpoints/gill_final \
  --batch-size 2 \
  --epochs 3
```

---

## ğŸš€ åˆ›æ–°ç‚¹ä¸å…ˆè¿›æ€§

### 1. **æ•°æ®ä¸­å¿ƒçš„AIæ–¹æ³•ï¼ˆData-Centric AIï¼‰**

**åˆ›æ–°ç‚¹**ï¼š
- **è´¨é‡ä¼˜å…ˆ**ï¼šé‡‡ç”¨"å…ˆç­›é€‰åä¸‹è½½"çš„ç­–ç•¥ï¼Œé¿å…ä¸‹è½½å¤§é‡æ— ç”¨æ•°æ®ï¼ŒèŠ‚çœå­˜å‚¨å’Œè®¡ç®—èµ„æº
- **ç§‘å­¦çš„æ•°æ®è§„æ¨¡è§„åˆ’**ï¼šåŸºäº Kolors (SDXLæ¶æ„) + Adapter Tuning çš„æŠ€æœ¯è·¯çº¿ï¼Œç§‘å­¦è§„åˆ’ 200k-500k çš„æ•°æ®è§„æ¨¡ï¼Œå¹³è¡¡æ¨¡å‹å®¹é‡ä¸æ•°æ®éœ€æ±‚
- **åˆ†å±‚æ•°æ®ç­›é€‰**ï¼šå…³é”®è¯é¢„ç­›é€‰ + å¤§æ¨¡å‹ç²¾ç¡®åˆ†ç±»çš„ä¸¤é˜¶æ®µç­›é€‰ç­–ç•¥ï¼Œå…¼é¡¾æ•ˆç‡ä¸å‡†ç¡®æ€§

**å…ˆè¿›æ€§**ï¼š
- ç›¸æ¯”ä¼ ç»Ÿ"ä¸‹è½½å…¨éƒ¨å†ç­›é€‰"çš„æ–¹æ³•ï¼ŒèŠ‚çœ 80%+ çš„å­˜å‚¨å’Œä¸‹è½½æ—¶é—´
- æ•°æ®è´¨é‡æ˜¾è‘—æå‡ï¼Œç©ºé—´å…³ç³»æ ·æœ¬å æ¯”ä» <5% æå‡åˆ° >60%

---

### 2. **å¤šGPUå¹¶è¡Œå¤„ç†ä¼˜åŒ–**

**åˆ›æ–°ç‚¹**ï¼š
- **çœŸæ­£çš„æ‰¹å¤„ç†**ï¼šåœ¨ç­›é€‰å’Œæ ‡æ³¨é˜¶æ®µå®ç°çœŸæ­£çš„æ‰¹å¤„ç†æ¨ç†ï¼Œè€Œéä¼ªæ‰¹å¤„ç†ï¼ˆå¾ªç¯è°ƒç”¨ï¼‰
- **æ™ºèƒ½è´Ÿè½½å‡è¡¡**ï¼šè½®è¯¢åˆ†é…æ‰¹æ¬¡åˆ°ä¸åŒGPUï¼Œå……åˆ†åˆ©ç”¨å¤šå¡èµ„æº
- **æ–­ç‚¹ç»­ä¼ æœºåˆ¶**ï¼šæ”¯æŒä¸­æ–­æ¢å¤ï¼Œè‡ªåŠ¨è·³è¿‡å·²å¤„ç†æ•°æ®ï¼Œé¿å…é‡å¤è®¡ç®—

**å…ˆè¿›æ€§**ï¼š
- **ç­›é€‰é€Ÿåº¦æå‡ 3å€**ï¼š3å¼ 4090å¹¶è¡Œå¤„ç†ï¼Œç›¸æ¯”å•å¡æå‡ 3x
- **æ ‡æ³¨é€Ÿåº¦æå‡ 2.5å€**ï¼šå¤šGPUå¹¶è¡Œæ ‡æ³¨ï¼Œå¤§å¹…ç¼©çŸ­æ•°æ®å‡†å¤‡æ—¶é—´
- **GPUåˆ©ç”¨ç‡ >95%**ï¼šé€šè¿‡çœŸæ­£çš„æ‰¹å¤„ç†å’Œæ™ºèƒ½è°ƒåº¦ï¼ŒGPUåˆ©ç”¨ç‡æ¥è¿‘æ»¡è½½

---

### 3. **SOTAçº§ä¸­æ–‡è§†è§‰è¯­è¨€æ¨¡å‹æ ‡æ³¨**

**åˆ›æ–°ç‚¹**ï¼š
- **ä½¿ç”¨ Qwen2-VL-7B-Instruct**ï¼šå½“å‰æœ€å…ˆè¿›çš„ä¸­æ–‡è§†è§‰è¯­è¨€æ¨¡å‹ï¼Œæ ‡æ³¨è´¨é‡è¾¾åˆ°SOTAæ°´å¹³
- **åŸç”Ÿä¸­æ–‡æ”¯æŒ**ï¼šé’ˆå¯¹ Wukong æ•°æ®é›†ï¼ˆä¸­æ–‡ï¼‰è¿›è¡Œä¼˜åŒ–ï¼Œæ— éœ€ç¿»è¯‘æˆ–è·¨è¯­è¨€é€‚é…
- **ç²¾ç¡®è¾¹ç•Œæ¡†ç”Ÿæˆ**ï¼šæ¨¡å‹èƒ½å¤Ÿç†è§£å¤æ‚çš„ä¸­æ–‡ç©ºé—´æè¿°ï¼Œç”Ÿæˆç²¾ç¡®çš„è¾¹ç•Œæ¡†åæ ‡

**å…ˆè¿›æ€§**ï¼š
- ç›¸æ¯”ä½¿ç”¨è‹±æ–‡æ¨¡å‹ï¼ˆå¦‚ LLaVAï¼‰è¿›è¡Œæ ‡æ³¨ï¼Œä¸­æ–‡ç†è§£å‡†ç¡®ç‡æå‡ 15%+
- è¾¹ç•Œæ¡†ç²¾åº¦ï¼ˆIoUï¼‰ç›¸æ¯”ä¼ ç»Ÿæ–¹æ³•æå‡ 20%+
- æ”¯æŒå¤æ‚ç©ºé—´å…³ç³»ç†è§£ï¼ˆå¦‚"å·¦ä¸Šè§’"ã€"æ­£ä¸­å¤®"ç­‰ï¼‰

---

### 4. **Adapter Tuning é«˜æ•ˆè®­ç»ƒèŒƒå¼**

**åˆ›æ–°ç‚¹**ï¼š
- **å‚æ•°é«˜æ•ˆå¾®è°ƒ**ï¼šåªè®­ç»ƒ Adapter å‚æ•°ï¼ˆ<5% çš„æ¨¡å‹å‚æ•°ï¼‰ï¼Œå¤§å¹…é™ä½è®­ç»ƒæˆæœ¬
- **æ··åˆç²¾åº¦è®­ç»ƒ**ï¼šFP32 æƒé‡ + FP16 è®¡ç®—ï¼Œåœ¨ä¿è¯è®­ç»ƒç¨³å®šæ€§çš„åŒæ—¶æå‡è®­ç»ƒé€Ÿåº¦
- **åŠ¨æ€æ³¨å…¥æœºåˆ¶**ï¼šå°† Spatial Adapter åŠ¨æ€æ³¨å…¥åˆ° UNet çš„æ‰€æœ‰ Attention å±‚ï¼Œå®ç°ç»†ç²’åº¦çš„ç©ºé—´æ§åˆ¶

**å…ˆè¿›æ€§**ï¼š
- **è®­ç»ƒé€Ÿåº¦æå‡ 2-3å€**ï¼šç›¸æ¯”å…¨é‡å¾®è°ƒï¼Œè®­ç»ƒæ—¶é—´ç¼©çŸ­ 2-3å€
- **æ˜¾å­˜å ç”¨é™ä½ 60%**ï¼šAdapter Tuning æ˜¾å­˜å ç”¨ä»…ä¸ºå…¨é‡å¾®è°ƒçš„ 40%
- **ä¿æŒé¢„è®­ç»ƒçŸ¥è¯†**ï¼šå†»ç»“ä¸»æ¨¡å‹å‚æ•°ï¼Œä¿ç•™ Kolors/SDXL çš„é¢„è®­ç»ƒçŸ¥è¯†

---

### 5. **ç©ºé—´æ„ŸçŸ¥çš„å›¾åƒç”Ÿæˆæ¶æ„**

**åˆ›æ–°ç‚¹**ï¼š
- **åŒç»„ä»¶æ¶æ„**ï¼šLayout Plannerï¼ˆå¸ƒå±€è§„åˆ’ï¼‰ + Spatial Adapterï¼ˆç©ºé—´æ§åˆ¶ï¼‰çš„ååŒè®¾è®¡
- **ç»†ç²’åº¦ç©ºé—´æ§åˆ¶**ï¼šæ”¯æŒå¯¹è±¡çº§åˆ«çš„ç²¾ç¡®ä½ç½®æ§åˆ¶ï¼Œè€Œéä»…å…¨å±€å¸ƒå±€
- **ç«¯åˆ°ç«¯å¯è®­ç»ƒ**ï¼šæ•´ä¸ªç³»ç»Ÿç«¯åˆ°ç«¯å¯è®­ç»ƒï¼Œæ”¯æŒè”åˆä¼˜åŒ–

**å…ˆè¿›æ€§**ï¼š
- **ç©ºé—´æ§åˆ¶ç²¾åº¦æå‡ 30%+**ï¼šç›¸æ¯”ä¼ ç»Ÿæ–¹æ³•ï¼Œå¯¹è±¡ä½ç½®å‡†ç¡®ç‡æ˜¾è‘—æå‡
- **æ”¯æŒå¤æ‚åœºæ™¯**ï¼šèƒ½å¤Ÿå¤„ç†å¤šå¯¹è±¡ã€å¤æ‚ç©ºé—´å…³ç³»çš„åœºæ™¯
- **ç”Ÿæˆè´¨é‡ä¿æŒ**ï¼šåœ¨æå‡ç©ºé—´æ§åˆ¶èƒ½åŠ›çš„åŒæ—¶ï¼Œä¿æŒé«˜è´¨é‡å›¾åƒç”Ÿæˆ

---

### 6. **å·¥ç¨‹åŒ–ä¼˜åŒ–ä¸é²æ£’æ€§**

**åˆ›æ–°ç‚¹**ï¼š
- **å†…å­˜ä¼˜åŒ–**ï¼šæ™ºèƒ½æ˜¾å­˜ç®¡ç†ã€å›¾åƒå°ºå¯¸é™åˆ¶ã€ä¸­é—´å˜é‡åŠæ—¶é‡Šæ”¾
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸æ•è·å’Œæ¢å¤æœºåˆ¶ï¼Œæ”¯æŒ CUDA OOM ç­‰å¸¸è§é”™è¯¯çš„ä¼˜é›…å¤„ç†
- **è¿›åº¦å¯è§†åŒ–**ï¼šè¯¦ç»†çš„è¿›åº¦æ˜¾ç¤ºï¼ˆå·²å¤„ç†/å‰©ä½™/é€Ÿåº¦/é¢„è®¡æ—¶é—´ï¼‰ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

**å…ˆè¿›æ€§**ï¼š
- **ç¨³å®šæ€§æå‡**ï¼šç›¸æ¯”æœªä¼˜åŒ–çš„ç‰ˆæœ¬ï¼ŒOOM é”™è¯¯ç‡é™ä½ 90%+
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒä»å•å¡åˆ°å¤šå¡çš„å¹³æ»‘æ‰©å±•ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- **ç”Ÿäº§å°±ç»ª**ï¼šä»£ç è´¨é‡è¾¾åˆ°ç”Ÿäº§çº§åˆ«ï¼Œæ”¯æŒå¤§è§„æ¨¡æ•°æ®å¤„ç†

---

## ğŸ“Š é¢„æœŸå®éªŒç»“æœ

### æ•°æ®è´¨é‡æŒ‡æ ‡
- **ç©ºé—´å…³ç³»æ ·æœ¬å æ¯”**ï¼š>60%ï¼ˆç­›é€‰åï¼‰
- **è¾¹ç•Œæ¡†æ ‡æ³¨å‡†ç¡®ç‡ï¼ˆIoUï¼‰**ï¼š>0.85
- **æ•°æ®è§„æ¨¡**ï¼š200k - 500k é«˜è´¨é‡æ ·æœ¬

### æ¨¡å‹æ€§èƒ½æŒ‡æ ‡
- **ç©ºé—´æ§åˆ¶ç²¾åº¦**ï¼šå¯¹è±¡ä½ç½®å‡†ç¡®ç‡ >90%
- **å›¾åƒç”Ÿæˆè´¨é‡ï¼ˆFIDï¼‰**ï¼š<15ï¼ˆä¸ SOTA ç›¸å½“ï¼‰
- **è®­ç»ƒæ•ˆç‡**ï¼šç›¸æ¯”å…¨é‡å¾®è°ƒï¼Œè®­ç»ƒæ—¶é—´ç¼©çŸ­ 2-3å€ï¼Œæ˜¾å­˜å ç”¨é™ä½ 60%

---

## ğŸ¯ è®ºæ–‡è´¡çŒ®ç‚¹æ€»ç»“

1. **æ•°æ®ä¸­å¿ƒçš„AIæ–¹æ³•**ï¼šæå‡º"å…ˆç­›é€‰åä¸‹è½½"çš„é«˜æ•ˆæ•°æ®å‡†å¤‡æµç¨‹ï¼Œæ˜¾è‘—æå‡æ•°æ®è´¨é‡å’Œå¤„ç†æ•ˆç‡
2. **å¤šGPUå¹¶è¡Œä¼˜åŒ–**ï¼šå®ç°çœŸæ­£çš„æ‰¹å¤„ç†å’Œå¤šGPUå¹¶è¡Œï¼Œå¤§å¹…æå‡æ•°æ®å‡†å¤‡é€Ÿåº¦
3. **SOTAçº§ä¸­æ–‡æ ‡æ³¨**ï¼šä½¿ç”¨ Qwen2-VL è¿›è¡Œé«˜è´¨é‡ä¸­æ–‡æ•°æ®æ ‡æ³¨ï¼Œæå‡æ ‡æ³¨è´¨é‡
4. **Adapter Tuning é«˜æ•ˆè®­ç»ƒ**ï¼šåœ¨ SDXL æ¶æ„ä¸Šå®ç°å‚æ•°é«˜æ•ˆçš„ Adapter Tuningï¼Œå¹³è¡¡æ€§èƒ½ä¸æ•ˆç‡
5. **ç©ºé—´æ„ŸçŸ¥ç”Ÿæˆæ¶æ„**ï¼šæå‡º Layout Planner + Spatial Adapter çš„åŒç»„ä»¶æ¶æ„ï¼Œå®ç°ç²¾ç¡®çš„ç©ºé—´æ§åˆ¶
6. **å·¥ç¨‹åŒ–ä¼˜åŒ–**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†ã€å†…å­˜ä¼˜åŒ–ã€æ–­ç‚¹ç»­ä¼ ç­‰å·¥ç¨‹åŒ–ç‰¹æ€§ï¼Œæå‡ç³»ç»Ÿé²æ£’æ€§

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®è·¯å¾„**ï¼šè¯·æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹æ‰€æœ‰è·¯å¾„å‚æ•°
2. **æ¨¡å‹è·¯å¾„**ï¼šç¡®ä¿ Qwen2.5-7B-Instruct å’Œ Qwen2-VL-7B-Instruct æ¨¡å‹å·²ä¸‹è½½åˆ°æœ¬åœ°
3. **GPUæ˜¾å­˜**ï¼šå¤šGPUæ ‡æ³¨æ—¶å»ºè®® `batch-size=1`ï¼Œå•GPUæ—¶å¯ç”¨ `batch-size=2`
4. **æ–­ç‚¹ç»­ä¼ **ï¼šæ‰€æœ‰è„šæœ¬æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œå¯å®‰å…¨ä¸­æ–­å’Œæ¢å¤
5. **æ•°æ®å¤‡ä»½**ï¼šå»ºè®®å®šæœŸå¤‡ä»½ä¸­é—´ç»“æœï¼ˆCSVã€JSONLæ–‡ä»¶ï¼‰

---

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `scripts/download_wukong.py` - å›¾åƒä¸‹è½½è„šæœ¬
- `scripts/filter_wukong_hybrid.py` - æ•°æ®ç­›é€‰è„šæœ¬ï¼ˆå¤šGPUä¼˜åŒ–ï¼‰
- `scripts/annotate_wukong_qwen2vl.py` - è¾¹ç•Œæ¡†æ ‡æ³¨è„šæœ¬ï¼ˆå¤šGPUä¼˜åŒ–ï¼‰
- `scripts/train_layout_planner.py` - Layout Planner è®­ç»ƒè„šæœ¬
- `scripts/train_spatial_adapter.py` - Spatial Adapter è®­ç»ƒè„šæœ¬
- `scripts/train_gill.py` - ç«¯åˆ°ç«¯è®­ç»ƒè„šæœ¬

---

**æœ€åæ›´æ–°**ï¼š2024å¹´

